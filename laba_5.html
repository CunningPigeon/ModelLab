<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Документ</title>
    <link rel="stylesheet" href="css/laba.css">
    <link rel="stylesheet" href="css/modal.css">

    <script type="importmap">
        {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/examples/jsm/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
        }
    </script>
</head>

<body>
    <script src="js/script.js" type="module"></script>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <span class="left-header">Обработка трехмерных графических изображений</span>
                <span class="right-header">1.3 Моделирование сцены</span>
            </div>
            <div class="header-bottom">
                <a href="index.html" class="toc-link" onclick="showTableOfContents()">Содержание</a>
            </div>
        </div>
        <div class="content">
            <div class="text-content" id="text-content">
                <h1>Лабораторная работа №5</h1>
                <h2 class="topic">Создание NURBS и Мета-форм</h2>

                <h3>Цель:</h3>
                <ol>
                    <li>Научить использовать NURBS для создания изогнутых форм </li>
                    <li>Изучить создавать различные типы Мета-форм</li>
                </ol>

                <h3>Ход работы</h3>
                <p>Использование NURBS для создания Изогнутых Форм (Поверхностей)</p>

                <div class="container_images_rows">
                    <img src="lb/laba_5/images/image_01.png">
                </div>
                <p class="figure">Рисунок 1</p>
                <p>Если вы посмотрите в меню Surface, то увидите несколько вариаций форм, которые могут быть созданы.
                    Эти поверхности можно использовать как они есть или преобразовать в меш-объект и работать как с
                    обычными объектами, редактируя вершины.</p>
                <p>Для преобразования NURBS-поверхности в меш, выделите нужную поверхность и нажмите комбинацию клавиш
                    Alt -" C ". В появившемся меню выберите " Mesh ". С помощью NURBS вы можете создавать различные
                    интересные модели. </p>

                <p class="p_heading">Упражнение 1.</p>

                <p>Сейчас мы поработает с NURBS Circle для создания необычного тоннеля.</p>
                <p>Процесс создания тоннеля потребует создания нескольких профилей</p>
                <p>NURBS окружностей и соединения их вместе. Первое, что мы сделаем - добавим NURBS Окружность. Для
                    этого нажмите Shift -" A ", выберите Surface, затем NURBS Circle. В Режиме Редактирования выберите
                    несколько вершин и слегка измените форму окружности. После этого выйдите из режима редактирования.
                </p>
            </div>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_02.png">
            </div>
            <p class="figure">Рисунок 2</p>
            <p>Перейдите в вид, в котором вы видите окружность сбоку (попробуйте вид спереди, если создавали окружность
                в виде сверху). Возможно вам захочется переключить режим затенения в Каркасный (Wireframe). Используйте
                сочетание клавиш Shift -" D " для копирования окружности (трех-четырех копий будет достаточно).</p>
            <p>После этого повертите ваш вид для удобной работы с каждой окружностью по отдельности и в Режиме
                Редактирования слегка измените форму каждой из них.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_03.png">
                <img src="lb/laba_5/images/image_03.1.png">
            </div>
            <p class="figure">Рисунок 3</p>

            <p>После изменения форм, выйдите из режима редактирования и выделите все окружности Правой Кнопкой Мыши при
                нажатой клавише Shift.</p>
            <p>Для объединения всех окружностей нажмите Ctrl -" J ".</p>
            <p>В заключение, нажмите клавишу Tab для перехода в Режим Редактирования, нажмите клавишу " A " для
                выделения всех вершин, затем нажмите " F " для создания граней.</p>
            <p>Результатом должен стать плавно изогнутый объект.</p>
            <p>Параметры формы можно контролировать в разделе " Object Data " в Окне Свойств.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_04.png">
            </div>
            <p class="figure">Рисунок 4</p>
            <p>Если вам нужно преобразовать этот объект в Меш, нажмите Alt -" C ". Это отличный способ для создания
                корпуса лодки и других подобных объектов.</p>
            <p>https://drive.google.com/file/d/1NrG2SCTwqhBHdg9Pa2pyEC5rP-kVWWO4/view?usp=sharing</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_05.png" class="glow openModal" id="openModal"
                data-model="3dmodel/lb_5/LB05_miss01.glb">
            </div>
            <p class="figure">Рисунок 5</p>

            <p class="p_heading">Задание 1.</p>

            <p>Шаг 1Будем создавать сердце влюбленных используя стандартную NURBS сферу деформируя ее при помощи
                контрольных точек.</p>
            <p>Добавьте NURBS сферу. NURBS сферу можно добавить из диалога нажав клавишу пробел или Shift+A.В
                появившемся меню выбираем пункт указанный на рисунке:</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_06.png">
            </div>
            <p class="figure">Рисунок 6</p>

            <p>Затем масштабируйте полученную сферу нажав клавишу S и перемещая мышь, когда добьетесь желаемого
                результата зафиксируйте его нажав левую клавишу мыши.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_07.png">
            </div>
            <p class="figure">Рисунок 7</p>

            <p>Переключитесь в режим вида спереди нажав на цифровой клавиатуре 1, и войдите в режим редактирования нажав
                клавишу Tab. Отмените выделение всех вершин нажав клавишу A. Используя выделение прямоугольником B
                выберите средние верхние контрольные точки. Должно получится как на рисунке:</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_08.png">
            </div>
            <p class="figure">Рисунок 8</p>
            <p>Переключитесь в режим вида сверху. Убедитесь, что выбраны все вершины как на рисунке, если все в порядке
                вернитесь в режим вида спереди .</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_09.png">
            </div>
            <p class="figure">Рисунок 9</p>

            <p>Войдите в режим перемещения, и переместите немного вниз выбранные вершины. Нажатие средней клавиши мыши
                позволяет перемещать выбранные точки только по одной оси, зафиксируйте положение .Должно получится
                что-то типа этого:</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_10.png">
            </div>
            <p class="figure">Рисунок 10</p>

            <p>Отмените выделение всех вершин нажав клавишу А. Используя выделение прямоугольником B выберите верхние
                левые и правые контрольные точки, используя режим масштабирования S и перемещения G добейтесь похожего
                результата.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_11.png">
            </div>
            <p class="figure">Рисунок 11</p>

            <p>Отмените выделение всех вершин. Используя выделение прямоугольником выберите нижние левые и правые
                контрольные точки, используя режим масштабирования добейтесь такого результата как на рисунке:</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_12.png">
            </div>
            <p class="figure">Рисунок 12</p>

            <p>Используя режим перемещения поднимите выделенные вершины немного вверх.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_13.png">
            </div>
            <p class="figure">Рисунок 13</p>
            <p>Теперь, в окне вида спереди наше сердце выглядит лучше, но когда переключим на вид сбоку, Вы увидите, что
                наше сердце слишком толстое!</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_14.png">
            </div>
            <p class="figure">Рисунок 14</p>

            <p>Выделите все вершины клавишей и масштабируйте по оси X. Для того чтобы сделать это, перемещайте вашу мышь
                в горизонтальной плоскости и нажмите среднюю клавишу мыши . Это заблокирует перемещение в одной
                плоскости.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_15.png">
            </div>
            <p class="figure">Рисунок 15</p>


            <p>Результат после масштабирования.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_16.png" class="glow openModal" id="openModal"
                    data-model="3dmodel/lb_5/LB05_z01.glb">
            </div>
            <p class="figure">Рисунок 16</p>

            <p class="p_heading">Эффект Жидкости и Капель с Использованием Метa-форм</p>

            <p>Несколько версий назад Blender мог создавать всего один вид Метa- формы - Meta Ball. Прошло совсем
                немного времени и программисты добавили новые формы и почистили код.</p>
            <p>Теперь вы можете создавать различные типы Мета-форм.</p>
            <p>Все они работают по тем же принципам. Как только объекты приближаются достаточно близко друг к другу, они
                начинают "притягиваться" и "течь" вместе. Мета-формы могут быть текстурированы и анимированны как и
                любые другие объекты в Blender. Ray-Tracing эффекты, такие как отражение и прозрачность, могут создать
                интересные композиции при применении их к Мета-формам.</p>
            <p>Мета-формы ведут себя так же как и другие объекты, за исключением одного "но" :</p>
            <p>Первая созданная Мета-форма будет родительской для всех остальных. Когда вы будете перемещать ее,
                остальные мета-формы будут поворачиваться за ней. Материалы всех Мета-форм так же связанны.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_17.png">
            </div>
            <p class="figure">Рисунок 17</p>
            <p>Мета-формы могут показаться слегка запутанными, в первую очередь, из-за их взаимодействия между собой.
                Например, для выделения определенной Мета-формы вы щелкаете ПКМ по окружности (Selector Ring), вокруг
                этой формы. Но если щелкнуть по самому мешу мета-формы, то меши других мета-форм также оказываются
                выделенными. Помните, мета-формы связанны и управляются первой добавленной в сцену Мета-формой. Изменяя
                материал первой формы - вы изменяете внешний вид всех Мета-форм.</p>
            <p>Материалы всех Мета-форм также связаны.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_18.png">
            </div>
            <p class="figure">Рисунок 18</p>
            <p>Для изменений формы только одного объекта выделяйте окружность вокруг него. Вы можете изменять внешний
                вид и качество эффектов Мета-форм в разделе Object Data на панели Metaball. Попробуйте
                поэкспериментировать с этими параметрами.</p>
            <p>Если при создании мета-форм вы находились в Режиме Редактирования, то все мета-формы окажутся
                объединенными в один объект.</p>
            <p>Создавайте новые мета-формы находясь в Объектном Режиме.</p>

            <p class="heading">Задание 2.</p>

            <p>Создание Лавовой Лампы</p>
            <p>Создайте новую сцену Blender, удалите из нее начальный куб и сохраните с именем " Lava_Lamp ". В этом
                задании мы экструдируем окружность, создадим NURBS поверхность и используем Мета-формы для создания
                эффекта Лавы в Лампе.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_19.png">
            </div>
            <p class="figure">Рисунок 19</p>

            <p>Начнем с создания Меш-Окружности в виде сверху. После добавления окружности на Полке Инструментов
                выберите опцию Fill (заполнить окружность). В Виде Спереди перейдите в Режим Редактирования и
                Экструдируйте (клавиша "E") окружность для получения формы основания лампы (как на иллюстрации справа).
            </p>
            <p>Наверняка вам захочется сгладить меш основания (Кнопка Smooth в Полке Инструментов) и активировать
                функцию Auto-Smooth (в разделе Object Data в Окне Свойств).</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_20.png">
            </div>
            <p class="figure">Рисунок 20</p>

            <p>Мы могли бы создать стеклянную часть лампы простым экструдированием окружности, как мы делали с
                основанием, но для практики давайте воспользуемся приемом "лофтинга формы" - сформируем форму по
                образующим ее профилям — NURBS - окружностям. Переключитесь обратно в вид сверху и откройте меню " Add "
                (Shift -" A "), в разделе Surface выберите NURBS Circle.</p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_21.png">
            </div>
            <p class="figure">Рисунок 21</p>

            <p>После добавления NURBS - окружности переключитесь в вид спереди и продублируйте ее несколько раз.
                Измените размер окружностей для получения конусообразной формы стеклянной части лампы. Удерживая клавишу
                "Shift" выделите все окружности и объедините их с помощью </p>
            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_22.png">
            </div>
            <p class="figure">Рисунок 22</p>

            <p>Самое время сформировать поверхность по окружностям. Перейдите в Режим Редактирования и выделите все
                вершины клавишей "A". Для создания поверхности нажмите клавишу "F". Она может выглядеть не совсем так,
                как вы хотите. Снимите выделение со всех вершин (клавиша "A") и в виде спереди инструментом выделения
                прямоугольником (клавиша "B") выделите отдельную окружность. Измените ее размер или переместите ее для
                получения нужной формы.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_23.png">
            </div>
            <p class="figure">Рисунок 23</p>
            <p>После того как вы закончите, форма должна выглядеть близко к иллюстрации.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_24.png">
            </div>
            <p class="figure">Рисунок 24</p>
            <p>Последним шагом в создании стеклянной части лампы будет преобразование NURBS-поверхности в Меш-объект.
                Используйте для этого сочетание клавиш Alt -"C". В появившемся меню выберите " Mesh from Curve / Meta /
                Surf / Text ". Добавьте мешу сглаживание (Smooth) и включите опцию Auto-Smooth.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_25.png">
            </div>
            <p class="figure">Рисунок 25</p>

            <p>Теперь нам нужно сформировать верхушку лампы. Сделайте это тем же способом, как и основу лампы, используя
                меш-окружность. После создания формы, применения сглаживания (Smooth) и Auto-Smooth объект может
                выглядеть как на изображении.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_26.png">
            </div>
            <p class="figure">Рисунок 26</p>

            <p>Для исправления этого эффекта нам нужно изменить параметры нормалей граней.</p>
            <p>Для этого перейдите в Режим Редактирования и выделите все вершины меша. На Полке Инструментов найдите
                блок "Normals" и нажмите кнопку "Recalculate" для перерасчета направления нормалей всех граней в одну
                сторону.</p>
            <p>Возможно понадобиться нажать кнопку "Flip Direction" для изменения направления всех нормалей в обратную
                сторону. Это должно решить проблему.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_27.png">
                <img src="lb/laba_5/images/image_27.1.png">
            </div>
            <p class="figure">Рисунок 27</p>

            <p>И не забывайте про кнопку "Remove Doubles" для объединения вершин в верхушке формы.</p>
            <p>Самое время создать красивый рендер вашей лампы. Наложите подходящие материалы на 3 части лампы.</p>
            <p>Используйте Ray-Tracing для создания стекла средней части. Поэкспериментируйте с параметрами Fresnel и
                IOR (искажение) для получения эффекта прозрачного геля.</p>
            <p>Возможно вам потребуется увеличить значение параметра Depth.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_28.png">
                <img src="lb/laba_5/images/image_28.1.png">
            </div>
            <p class="figure">Рисунок 28</p>

            <p>Лампа готова и самое время добавить лаву.</p>
            <p>Начните с добавления формы Meta Ball. Помните, что первая добавленная форма будет контролировать
                материалы и поведение следующих мета-форм. Определите нужное количество добавляемых мета форм по своему
                желанию. Смаштабируйте их при необходимости. Используйте сразу 3 основных вида для точного расположения
                мета-форм внутри лампы. Наложите на них материал и сделайте рендер</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_29.png">
                <img src="lb/laba_5/images/image_29.1.png">
            </div>
            <p class="figure">Рисунок 29</p>

            <p>Ваша лавовая лампа должна выглядеть как изображение. Несмотря на то, что вы наложили материал (в моем
                случае зеленый) мета-формы выглядят черными. Это связанно с эффектом освещения и применением Ray-Tracing
                на стеклянной части.</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_30.png">
                <img src="lb/laba_5/images/image_30.1.png">
            </div>
            <p class="figure">Рисунок 30</p>

            <p>Что бы это исправить, перейдите в раздел настроек материалов ("Material") мета-форм и в панели "Shading"
                найдите слайдер Emit. Это даст зеленый цвет мета-объектов но они будут выглядеть плоско.</p>
            <p>Нашим следующим шагом будет добавление лампы Point на дно стеклянной части. В настройках лампы выключите
                все эффекты теней. Теперь при рендере вы должны увидеть эффекты освещения на вашей лаве.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_31.png">
            </div>
            <p class="figure">Рисунок 31</p>

            <p>Выглядит гораздо лучше, но мы можем использовать еще и эффект Ненаправленного Освещения (Indirect Light).
            </p>
            <p>Так как мы увеличили значение параметра Emit в настройках материала лавы, настроив параметры окружения мы
                получим эффект свечения от наших мета-форм.</p>


            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_32.png">
            </div>
            <p class="figure">Рисунок 32</p>

            <p>Перейдите в раздел World, найдите в нем панели Gather и нажмите кнопку "Approximate". Затем, активируйте
                панель "Indirect Light"</p>

            <div class="container_images_rows">
                <img src="lb/laba_5/images/image_33.png" class="glow openModal" id="openModal"
                data-model="3dmodel/lb_5/LB05_z02.glb">
            </div>
            <p class="figure">Рисунок 33</p>
            <p>Сделайте рендер изображения и проверьте результат. Если потребуется, измените настройки параметров.</p>

            <p class="p_heading">Контрольные вопросы</p>
            <ol>
                <li>Назовите вариаций форм NURBS.</li>
                <li>Перечислите основные типы Мета-фом</li>
                <li>Мета-формы ведут себя так же как и другие объекты, за исключением чего?</li>

            </ol>

        </div>
    </div>
    </div>
    <div class="footer">
        <div class="page-info-container">
            <a href="index.html" class="toc-link" onclick="showTableOfContents()">Содержание</a>
        </div>
    </div>
    </div>

    <!-- Модальное окно -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <div id="container">

            </div>
        </div>
    </div>
    <script src="js/modal.js"></script>
    </div>
</body>

</html>